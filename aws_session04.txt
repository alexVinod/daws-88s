cp /etc/passwd users
cat users

filter user id with awk
cat users | awk -F ":" '{print $3F}'

filter non system user 
awk -F ":" '$3>=1000 {print $1, $3}' users

filter nologin users (str comparision)
awk -F ":" '$NF == "/sbin/nologin"{print $1, $3}' users
awk -F ":" '$7F == "/sbin/nologin"{print $1, $3}' users

vim editor -> visually improved
vim <file-name> -> Open the file
create and open the file

vim linux.txt -> create and open the file
i -> insert Mode
Esc :wq! -> Save & Exit
cat linux.txt 

colon mode
===========
:q -> quit
:wq -> save the file
:q! -> dont save any changes, force quit
:set nu -> display line numbers
:set nonu -> remove line numbers
:<line-number> -> cursor goes to paticular line number
:/<word-to-search> -> top to bottom
:?<word-to-search> -> bottom to top
:<line-number>d -> deletes that line
:%d-> deletes everything in file
:noh -> don't highlight
:<line-number>s/<word-to-find>/replace-word -> replaces first occurances
:<line-number>s/<word-to-find>/replace-word/g -> all occurances
:%s/<word-to-find>/replace-word/g -> all occurances in all lines

ESC Mode
==========
gg -> takes top of the file
shift+g -> takes us to bottom of the file
u -> undo
Ctrl+r -> redo
dd -> deletes the line
yy -> copy the line
p -> paste below that line
shift+p -> paste above that line


User Management
================
user group roles permissions

user -> human
group -> group of humans, team
roles -> position
permissions -> access level to that roles

CRUD

-> user create
-> create group/team
-> assign user to that group

-> remove user from group
-> delete user

useradd <user-name> -> create a user
useradd ramesh

id <user-name> -> displays created user
id ramesh -> uid=1001(ramesh) gid=1001(ramesh) groups=1001(ramesh)

cat /etc/passwd -> all users info
cat /etc/group -> displays all the group in server
A user in Linux will have only one primary group and atleast one secondary group

When you create user, group also will be created with same name

groupadd devops
cat /etc/group

create ramesh in Primary Group
===============================
-g -> Primary Group
usermod -g <group-name> <user-name>
usermod -g devops ramesh 
id ramesh -> uid=1001(ramesh) gid=1002(devops) groups=1002(devops)

create ramesh in Secondary Group
=================================
-aG -> 'a' for Append 
groupadd testing
cat /etc/group

usermod -aG <group-name> <user-name>
usermod -aG testing ramesh
id ramesh -> uid=1001(ramesh) gid=1002(devops) groups=1002(devops),1003(testing)
-------------------------------------

We have to provide Username & Password for Ramesh
=================================================
passwd ramesh -> set the password
ramesh123

ssh ramesh@18.206.213.195 -> By default unable to login permission denied
by default only key-based authentication are enabled
1. vim /etc/ssh/sshd_config
2. Search for PasswordAuthentication 
   :/PasswordAuthentication 
   PasswordAuthentication yes -> no to yes
3. Save & Quit  :wq
4. sshd -t -> check the syntax of config
5. systemctl restart sshd -> restart sshd service
6. Now ask ramesh to relogin
   ssh ramesh@18.206.213.195
   ramesh123
   pwd -> /home/ramesh
   
How to give 'sudo' access to user:
==================================
/etc/sudoers
usermod -aG wheel ramesh -> adding user to wheel group
Ask ramesh to exit & relogin 
1. vim /etc/sudoers
2. usermod -aG wheel ramesh -> adding ramesh to wheel secondary group
3. which systemctl -> /usr/bin/systemctl
4. Now give /usr/bin/systemctl to ramesh
   %wheel  ALL=(ALL)       ALL
   ramesh  ALL=(ALL)       /usr/bin/systemctl
5. Save & Exit :wq!
6. visudo -c -> check the syntax

How to Remove user from that group:
===================================
gpasswd -d <user-name> <group-name>
gpasswd -d ramesh wheel

- Now ramesh can do only restarting systemctl cmds (/usr/bin/systemctl)
- can't add users or any

Now Ramesh going out from Organization how to remove ramesh from groups:
=========================================================================
1. usermod -L ramesh -> Locking the ramesh
2. Without deleting removing user from group 
   Need to take joining start position of company
   id ramesh
   uid=1001(ramesh) gid=1002(devops) groups=1002(devops),1003(testing)
   gpasswd -d ramesh testing -> removing from secondary group
   
   id ramesh
   uid=1001(ramesh) gid=1002(devops) groups=1002(devops)
   
3. We have to do changes in primary group
   usermod -g ramesh ramesh
   id ramesh
   uid=1001(ramesh) gid=1001(ramesh) groups=1001(ramesh)
   
Delete User and Before deleting need to copy User Directory :
=============================================================
.zip -> windows zip format
.tar.gz 
tar -cf <file-name>.tar.gz <folder>
tar -xf <file-name>.tar.gz

mkdir devops
tar -cf devops.tar.gz devops -> cf (create file)
tar -xf devops.tar.gz -> Extracting file


1. tar -cf /root/ramesh.tar.gz /home/ramesh
   tar: Removing leading `/' from member names
   ls -l
2. tar -xf ramesh.tar.gz
   ls -l
3. cd home/ramesh
   ls -l
4. userdel -r ramesh
5. id ramesh
   
1. lock him immediately
2. remove from all the froups
3. take backup of his home folder 
4. delete the user

userdel -r rameh -> remove user ramesh and his home directory
id ramesh
id: ‘ramesh’: no such user

How to delete group:
=====================
groupdel <group-name>
groupdel deveops